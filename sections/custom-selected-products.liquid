{% schema %}
{
  "name": "Best Sellers Section",
  "settings": [
    {
      "type": "text",
      "id": "section_text",
      "label": "Section Text",
      "default": "Our Best Sellers"
    }
  ],
  "blocks": [
    {
      "type": "blocks",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "checkbox",
          "id": "is_limited_edition",
          "label": "Is this a limited edition product?",
          "default": false
        },
        {
          "type": "text",
          "id": "limited_edition_text",
          "label": "Limited Edition Text",
          "default": "Limited Edition",
          "info": "Only applies if the product is marked as limited edition."
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "section",
      "name": "Selection de produits"
    }
  ]
}
{% endschema %}

<div class="best-sellers-container">
  <div class="best-sellers-scrollable">
    <div class="title__flip">
        <h2><div>
            {{ section.settings.section_text }}
        </div></h2>
    </div>
    {% for block in section.blocks %}
      {% if block.type == 'blocks' %}
        {% assign product = all_products[block.settings.product] %}
        <div class="{% if block.settings.is_limited_edition %}limited-edition-product{% else %}product{% endif %}">
          <a class="product__link" href="{{ product.url }}">
            {% if block.settings.is_limited_edition %}
              <h4 class="limited__text">{{ block.settings.limited_edition_text }}</h4>
            {% endif %}
            <img
              src="{{ product.featured_image | img_url: 'medium' }}"
              alt="{{ product.title }}"
            >
            <div class="product__details">
                <h3>{{ product.title }}</h3>
                <h3>{{ product.price | money }}</h3>
            </div>
    
          </a>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<style>
  .best-sellers-container {
    overflow: hidden;
    padding: 8rem 0;
  }

  .best-sellers-scrollable {
    display: flex;
    flex-direction: row;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch; /* For iOS smooth scrolling */
    flex-wrap: nowrap;
    overflow-y: hidden;
  }

  .best-seller-product {
    display: inline-block;
    flex: 0 0 auto;
    margin-right: 20px;
    scroll-snap-align: start;
  }

  .product,
  .limited-edition-product {

 /* height: 40vw; */
border: 1px solid black;

  }
.product img,  .limited-edition-product img{
    height: 30vw;
    width: auto;
    border-bottom: 1px solid black;
}
  .limited-edition-product {
    /* height: 43vw;
    transform: translateY(-3vw); */

  }

  .limited-edition-product h4 {
    background-color: #ffd700;
    padding: 5px;
    margin-bottom: 10px;
  }

  .limited-edition-product h3 {
    font-size: 1.5rem;
  }
  .product h3, .limited-edition-product h3{
    text-decoration: none;
  }
  .title__flip{
    width: 200px;
    display: flex;
    justify-content: center;
  }

  .title__flip h2{
    display: flex;
    justify-content: center;
    align-items: center;
    width: 200px;
font-size: 56px;
font-weight: 600;
  }
  .title__flip h2 div{
    transform: rotate(-90deg);

}

.product__details{
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 2rem;
}
.limited__text{
    position: absolute;
    top: 1rem;
    right: 2rem;
}
</style>
